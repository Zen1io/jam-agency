{% extends 'base.html' %}

{% block content %}
<h1 class="mb-5 text-center fw-bold">Наши работы</h1>

<div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
  {% for item in items %}
  <div class="col">
    <div class="card h-100 shadow-sm border-0 rounded-4 overflow-hidden">
      <div class="image-hover position-relative">
        <a href="#" data-bs-toggle="modal" data-bs-target="#modal{{ forloop.counter }}">
          <img src="{{ item.image.url }}" class="card-img-top img-fluid" style="height: 200px; object-fit: cover;" alt="{{ item.title }}">
          <div class="overlay d-flex justify-content-center align-items-center">
            <i class="bi bi-search text-white fs-1"></i>
          </div>
        </a>
      </div>
      <div class="card-body text-center px-3">
        <h5 class="card-title fw-semibold">{{ item.title }}</h5>
        <p class="card-text text-muted">{{ item.description|truncatewords:20 }}</p>
      </div>
    </div>
  </div>

  <!-- Модальное окно -->
  <div class="modal fade" id="modal{{ forloop.counter }}" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
      <div class="modal-content bg-dark border-0">
        <div class="modal-body p-0">
          <img src="{{ item.image.url }}" class="img-fluid w-100" alt="{{ item.title }}">
        </div>
      </div>
    </div>
  </div>
  {% endfor %}
</div>

<!-- Стили -->
<style>
  .image-hover {
    position: relative;
    overflow: hidden;
  }

  .image-hover img {
    transition: transform 0.3s ease;
  }

  .image-hover:hover img {
    transform: scale(1.05);
  }

  .overlay {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background-color: rgba(0, 0, 0, 0.35);
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  .image-hover:hover .overlay {
    opacity: 1;
  }
</style>

<!-- Bootstrap Icons (если не подключены) -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
{% endblock %}